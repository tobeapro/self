<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			*{margin:0;padding:0;}
			.main{position:relative;margin:0 auto;font-size:0;}
			.box{float:left;padding:6px;}
			.pic{padding:2px;border:1px solid #ddd;border-radius:5px;box-shadow:0 0 5px #ccc;}	
			.pic img{width:260px;height:auto;}					
		</style>
	</head>
	<body>
		<div id="main" class="main">
			<div class="box">		
				<div class="pic">
					<img src="http://a1.qpic.cn/psb?/V10ckHGk1fKzD7/7FzySvVUloIw9AX*AA3Xa3g2gq1YsqWvAcFKfD9IcIs!/b/dBcBAAAAAAAA&bo=4AEsAQAAAAARB*w!&rf=viewer_4">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/4i3y1MR4HdBo.QpktTgtGeHdacGSbf0DaVZ.KKIYSvo!/b/dBgBAAAAAAAA&bo=4AEsAQAAAAARB*w!&rf=viewer_4">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a1.qpic.cn/psb?/V10ckHGk1fKzD7/B.QImhv6GfWIwjzi9pYM7B8e13.NdlVhOI53*qxGRV4!/m/dCABAAAAAAAAnull&bo=4AEsAQAAAAARB*w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a4.qpic.cn/psb?/V10ckHGk1fKzD7/LQFL8BbscG3adUDhCx11YbSVsqUZQaNlCiLU8EgLHmo!/m/dBcBAAAAAAAAnull&bo=kAEsAQAAAAARB4w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a4.qpic.cn/psb?/V10ckHGk1fKzD7/sjjxOutAEE7aKqQAtf6geEPzt*6MsbxgstExvup69tY!/m/dHMBAAAAAAAAnull&bo=YAHcAAAAAAAFB5k!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a4.qpic.cn/psb?/V10ckHGk1fKzD7/Ozm8KYEocsecuCRMvDVnPu.AAtz77AgyIpf8ll2pIDY!/m/dBcBAAAAAAAAnull&bo=FQIsAQAAAAARBwo!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/i256OU16aYBVf*AeK1ZZAaE0BUYRpRkdG6tqAVICjPc!/m/dBkBAAAAAAAAnull&bo=4AEsAQAAAAARB*w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/*P1Lt4nySOJGB6yx73kfCyPaTLqK8jtwetgv*I.yEzs!/m/dKUAAAAAAAAAnull&bo=kAEsAQAAAAAFB5g!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a1.qpic.cn/psb?/V10ckHGk1fKzD7/3inxbXTXBD8sqhDHmT*61NToOg5Ws2e4AbGdhta8Gy8!/m/dBgBAAAAAAAAnull&bo=4AEsAQAAAAARB*w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a1.qpic.cn/psb?/V10ckHGk1fKzD7/HX2vbiIDFQVZG3VGitpE14bNyC5Mmk5qJBgWTpNYkmw!/m/dCABAAAAAAAAnull&bo=4AEsAQAAAAARB*w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/lMFaUMWQZH*SPiC68B2DxQJjBRF0cmh2Akw9gN8wgYI!/m/dG0BAAAAAAAAnull&bo=fAEsAQAAAAARB2A!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a3.qpic.cn/psb?/V10ckHGk1fKzD7/Kfq5sHnKRGIsPfOw5qMlOkfpWda6NbzBieZr5AJFC*c!/m/dPYAAAAAAAAAnull&bo=pwEsAQAAAAARB7s!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a4.qpic.cn/psb?/V10ckHGk1fKzD7/ywwYgklljdq6a.Etn6f*ORrKHpbu9.2waUb4bQyP31s!/m/dBcBAAAAAAAAnull&bo=4AEsAQAAAAARB*w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a1.qpic.cn/psb?/V10ckHGk1fKzD7/k7WvtAI8sSwsvUnBJzcA*MC6CI7ViIDMOg5B45ZuiR0!/m/dBgBAAAAAAAAnull&bo=kAEsAQAAAAARB4w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/TZpn4IwGPdTh69EsEZei2Hdbl9LMvEd4sz1l.bGJAWY!/m/dBkBAAAAAAAAnull&bo=4AEsAQAAAAARB*w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/5CneZyO6LXMbyhhgFxQPhxeTBKPWJT*gDmPHQyDAvnU!/m/dBkBAAAAAAAAnull&bo=FQIsAQAAAAARBwo!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a3.qpic.cn/psb?/V10ckHGk1fKzD7/3q*0gqWex14sLEDfA06r5WjCECfNQEq4BgLQIpagT0U!/m/dMYAAAAAAAAAnull&bo=FgIsAQAAAAAFBx0!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/e3Aa1.umvY95rS4kaQ5gKYNzQmMSLjj0cLyc8Vg*T6M!/m/dBkBAAAAAAAAnull&bo=4AEsAQAAAAARB*w!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a2.qpic.cn/psb?/V10ckHGk1fKzD7/0Q0sWXewcYTy2Jkj24XwsB6afLoI2dlKUl2CO7ngbwE!/m/dBkBAAAAAAAAnull&bo=FQIsAQAAAAARBwo!&rf=photolist&t=5">
				</div>
			</div>
			<div class="box">	
				<div class="pic">
					<img src="http://a1.qpic.cn/psb?/V10ckHGk1fKzD7/hVs6XbwtiBEwNPLfcAXbB0ioFfrMi88n09XgsbnhWt8!/m/dBgBAAAAAAAAnull&bo=FAIsAQAAAAARBws!&rf=photolist&t=5">
				</div>
			</div>
		</div>
		<script>
			window.onload=function(){
				waterfall();
				window.onresize=waterfall; 				
			}
			function waterfall(){
					var main=document.getElementById("main");
					var aChild=main.getElementsByTagName("*");
					var aBox=[];
					for(var i=0;i<aChild.length;i++){
						if(aChild[i].className=="box"){
							aBox.push(aChild[i]);
						}
					}
					var Mwidth=document.documentElement.clientWidth;
					var boxWidth=aBox[0].offsetWidth;
					var rowNum=Math.floor(Mwidth/boxWidth);
					main.style.width=rowNum*boxWidth+"px";
					var hArray=[];
					for(var j=0;j<aBox.length;j++){
						if(j<rowNum){
							aBox[j].style.position="static";
							hArray[j]=aBox[j].offsetHeight;
							
						}else{
							var height=getMin(hArray);
							var index=getIndex(height,hArray);
							aBox[j].style.position="absolute";
							aBox[j].style.left=index*boxWidth+"px";
							aBox[j].style.top=hArray[index]+"px";
							hArray[index]+=aBox[j].offsetHeight;
						}
					}
				}	
				function getMin(array){
					var min=array[0]
					for(var i=0;i<array.length;i++){
						if(min>array[i]){
							min=array[i];
						}
					}
					return min;
				}
				function getIndex(val,array){
					for(var k=0;k<array.length;k++){
						if(array[k]==val){
							return k
						}
					}
				}				
		</script>
	</body>
</html>
